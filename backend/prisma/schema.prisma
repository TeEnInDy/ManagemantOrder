// 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ==========================================
// üõí 1. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Product)
// ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏ô‡πâ‡∏≤ POS ‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ Bot ‡∏î‡∏∂‡∏á‡πÑ‡∏õ‡πÇ‡∏ä‡∏ß‡πå
// ==========================================
model Product {
  id          Int      @id @default(autoincrement())
  name        String
  price       Decimal  @db.Decimal(10, 2) // ‡πÉ‡∏ä‡πâ Decimal ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô
  category    String   // ‡πÄ‡∏ä‡πà‡∏ô Main, Appetizer, Salad, Drink
  description String?  @db.Text
  image       String?  // URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
  isActive    Boolean  @default(true) // true=‡∏Ç‡∏≤‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥, false=‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏î/‡∏õ‡∏¥‡∏î‡∏Ç‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏Ñ‡∏¢‡∏ñ‡∏π‡∏Å‡∏™‡∏±‡πà‡∏á‡πÉ‡∏ô OrderItem ‡πÑ‡∏´‡∏ô‡∏ö‡πâ‡∏≤‡∏á
  orderItems  OrderItem[]
}

// ==========================================
// üì¶ 2. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Å (StockItem)
// ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡∏£‡∏∞‡∏ö‡∏ö Inventory ‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô
// ==========================================
model StockItem {
  id                Int       @id @default(autoincrement())
  name              String
  category          String    // ‡πÄ‡∏ä‡πà‡∏ô Raw Material, Seasoning, Packaging
  quantity          Decimal   @db.Decimal(10, 2) // ‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏° 2 ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
  unit              String    // kg, bottle, pcs
  costPerUnit       Decimal   @db.Decimal(10, 2) // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô
  lowStockThreshold Int       @default(5)        // ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î
  
  // üî• ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
  expiryDate        DateTime? // ‡∏ß‡∏±‡∏ô‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (‡πÉ‡∏™‡πà ? ‡πÅ‡∏õ‡∏•‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏û‡∏ß‡∏Å‡∏ó‡∏¥‡∏ä‡∏ä‡∏π‡πà/‡∏ñ‡∏∏‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ö‡∏π‡∏î)
  supplier          String?   // ‡∏ã‡∏∑‡πâ‡∏≠‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡πâ‡∏≤‡∏ô‡πÑ‡∏´‡∏ô (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÇ‡∏ó‡∏£‡∏™‡∏±‡πà‡∏á‡∏ñ‡∏π‡∏Å‡∏ó‡∏µ‡πà)

  createdAt         DateTime  @default(now())    // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  updatedAt         DateTime  @updatedAt         // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
}

// ==========================================
// üßæ 3. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå (Order) - ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏ö‡∏¥‡∏•
// ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏à‡∏≤‡∏Å Web ‡πÅ‡∏•‡∏∞ Discord
// ==========================================
model Order {
  id              Int         @id @default(autoincrement())
  customerName    String?     // ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
  
  // -- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Discord --
  discordUserId   String?     // ID ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô Discord (‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ Bot ‡∏ó‡∏±‡∏Å‡πÅ‡∏ä‡∏ó‡∏Å‡∏•‡∏±‡∏ö)
  discordChannelId String?    // ID ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á (‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ Bot ‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏´‡πâ‡∏≠‡∏á)
  
  // -- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô --
  totalAmount     Decimal     @db.Decimal(10, 2)
  paymentMethod   String?     // Cash, Transfer, QR
  status          OrderStatus @default(Pending)
  note            String?     @db.Text // ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ ‡πÄ‡∏ä‡πà‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏ú‡∏±‡∏Å
  
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt

  // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå: ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á
  items           OrderItem[]
}

enum OrderStatus {
  Pending   // ‡∏£‡∏≠‡∏ó‡∏≥
  Cooking   // ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥
  Completed // ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ)
  Cancelled // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
}

// ==========================================
// üçΩÔ∏è 4. ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå (OrderItem)
// ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡πà‡∏≤‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏±‡πâ‡∏ô‡∏™‡∏±‡πà‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏õ‡∏ö‡πâ‡∏≤‡∏á ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà
// ==========================================
model OrderItem {
  id          Int      @id @default(autoincrement())
  orderId     Int
  order       Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  
  productId   Int?
  product     Product? @relation(fields: [productId], references: [id]) 
  
  // ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏¢‡∏Å‡πÑ‡∏ß‡πâ ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏ö‡∏¥‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô
  productName String   
  quantity    Int
  priceAtTime Decimal  @db.Decimal(10, 2) 
}

// ==========================================
// üí∞ 5. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ (Transaction)
// ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: Dashboard ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢
// ==========================================
model Transaction {
  id          Int             @id @default(autoincrement())
  type        TransactionType // ‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö (Income) ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ (Expense)
  category    String          // ‡πÄ‡∏ä‡πà‡∏ô Sales, Restock, Salary, Utility
  amount      Decimal         @db.Decimal(10, 2)
  description String?         // ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
  createdAt   DateTime        @default(now())
}

enum TransactionType {
  Income
  Expense
}